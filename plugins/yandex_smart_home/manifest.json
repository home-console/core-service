{
  "id": "yandex_smart_home",
  "name": "Yandex Smart Home",
  "version": "0.3.0",
  "description": "Yandex Smart Home and Alice adapter with auth integration - OAuth + device sync + intent mapping + voice commands + secure token management",
  "type": "internal",
  "runtime_mode": "in_process",
  "supported_modes": ["in_process", "microservice"],
  "mode_switch_supported": true,
  "actions": {
    "yandex.switch.toggle": {
      "description": "Toggle a smart switch via Yandex Smart Home",
      "payload_schema": {
        "type": "object",
        "properties": {
          "device_id": { "type": "string" },
          "on": { "type": "boolean" }
        },
        "required": ["device_id", "on"]
      }
    },
    "yandex.light.set_brightness": {
      "description": "Set brightness",
      "payload_schema": { "type": "object", "properties": { "device_id": { "type": "string" }, "brightness": { "type": "integer", "minimum": 0, "maximum": 100 } }, "required": ["device_id", "brightness"] }
    }
  },
  "capabilities": [
    "oauth",
    "device_discovery",
    "actions",
    "voice_commands",
    "intents",
    "alice_integration",
    "secure_token_storage",
    "auth_service_integration"
  ],
  "required_env": [
    "YANDEX_CLIENT_ID",
    "YANDEX_CLIENT_SECRET",
    "YANDEX_REDIRECT_URI",
    "AUTH_SERVICE_BASE",
    "INTERNAL_SERVICE_TOKEN"
  ],
  "config_schema": {
    "sync_interval": {
      "type": "integer",
      "default": 300,
      "description": "Interval in seconds for automatic device synchronization (0 to disable). If not set, uses device_poll_interval from core config",
      "minimum": 0
    },
    "full_sync_on_periodic": {
      "type": "boolean",
      "default": false,
      "description": "Whether to perform full device data sync (capabilities, properties) on periodic sync (slower but more complete)"
    },
    "device_online_timeout": {
      "type": "integer",
      "default": 300,
      "description": "Time in seconds after which device is considered offline (inherited from core config if not set)",
      "minimum": 1
    },
    "device_poll_interval": {
      "type": "integer",
      "default": 300,
      "description": "Interval in seconds for polling device states (inherited from core config if not set)",
      "minimum": 1
    }
  },
  "api_endpoints": [
    {
      "path": "/api/plugins/yandex_smart_home/start_oauth",
      "methods": ["GET"],
      "description": "Start Yandex OAuth flow"
    },
    {
      "path": "/api/plugins/yandex_smart_home/callback",
      "methods": ["GET", "POST"],
      "description": "OAuth callback endpoint"
    },
    {
      "path": "/api/plugins/yandex_smart_home/devices",
      "methods": ["GET"],
      "description": "Get Yandex devices"
    },
    {
      "path": "/api/plugins/yandex_smart_home/action",
      "methods": ["POST"],
      "description": "Execute action on Yandex device"
    },
    {
      "path": "/api/plugins/yandex_smart_home/sync",
      "methods": ["POST"],
      "description": "Synchronize devices with Yandex"
    },
    {
      "path": "/api/plugins/yandex_smart_home/alice",
      "methods": ["POST"],
      "description": "Handle voice commands from Yandex Alice"
    },
    {
      "path": "/api/plugins/yandex_smart_home/intents",
      "methods": ["GET", "POST"],
      "description": "Manage voice command intents"
    }
  ],
  "permissions": [
    "read_devices",
    "write_devices",
    "execute_commands",
    "manage_plugins"
  ],
  "dependencies": [],
  "metadata": {
    "author": "Home Console Team",
    "license": "MIT",
    "homepage": "https://github.com/home-console/yandex-smart-home"
  }
}
