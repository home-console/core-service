# –ü–ª–∞–Ω —Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã core-service

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î–≤–µ –ø–∞–ø–∫–∏ `core` (–∫–æ–Ω—Ñ–ª–∏–∫—Ç –Ω–∞–∑–≤–∞–Ω–∏–π)
- ‚úÖ `core-service/core/` - –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ core-service (database, event_bus, dependencies)
- ‚ö†Ô∏è `core-service/plugin_system/core/` - –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤ (base.py)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç –ø—É—Ç–∞–Ω–∏—Ü—É.

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `plugin_system/core/` ‚Üí `plugin_system/base/` –∏–ª–∏ `plugin_system/interfaces/`

### 2. –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã –≤ `plugins/`
- ‚ùå `plugins/base.py` - —Å—Ç–∞—Ä—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ InternalPluginBase –∏–∑ SDK)
- ‚ùå `plugins/loader.py` - —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Å—Ç–æ–π loader (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ plugin_system/loader.py)
- ‚ö†Ô∏è `plugins/devices_plugin.py` - –ø—Ä–∏–º–µ—Ä –ø–ª–∞–≥–∏–Ω–∞ (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ examples/)

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –∞—Ä—Ö–∏–≤/examples

### 3. –°—Ç–∞—Ä–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- ‚ùå `/core_service/` - –ø—É—Å—Ç–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (—Ç–æ–ª—å–∫–æ __init__.py –∏ __pycache__)

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å

### 4. Backup —Ñ–∞–π–ª—ã
- ‚ùå `.bak`, `.bak2` —Ñ–∞–π–ª—ã –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ yandex_smart_home/handlers/)

**–†–µ—à–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å

### 5. –î—É–±–ª–∏–∫–∞—Ç—ã –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- ‚ö†Ô∏è `plugin_loader.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ core-service) - –≤–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –§–∞–∑–∞ 1: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ plugin_system/core
1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `plugin_system/core/` ‚Üí `plugin_system/base/`
2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã `from .core.base import` ‚Üí `from .base import`
3. –û–±–Ω–æ–≤–∏—Ç—å `plugin_system/__init__.py`

### –§–∞–∑–∞ 2: –û—á–∏—Å—Ç–∫–∞ plugins/
1. –£–¥–∞–ª–∏—Ç—å `plugins/base.py` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
2. –£–¥–∞–ª–∏—Ç—å `plugins/loader.py` (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `plugins/devices_plugin.py` ‚Üí `examples/devices_plugin_example.py` –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å
4. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ `.bak`, `.bak2` —Ñ–∞–π–ª—ã

### –§–∞–∑–∞ 3: –û—á–∏—Å—Ç–∫–∞ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
1. –£–¥–∞–ª–∏—Ç—å `/core_service/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å `/plugin_loader.py` –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

### –§–∞–∑–∞ 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä
3. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```
core-service/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ core-service
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ event_bus.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ plugin_system/
‚îÇ   ‚îú‚îÄ‚îÄ base/                # ‚Üê –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –∏–∑ core/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.py
‚îÇ   ‚îú‚îÄ‚îÄ loader.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ plugins/                 # –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ client_manager/
‚îÇ   ‚îú‚îÄ‚îÄ pikvm_client/
‚îÇ   ‚îî‚îÄ‚îÄ yandex_smart_home/
‚îî‚îÄ‚îÄ ...
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –ø–∞–ø–æ–∫ `core`
2. ‚úÖ –ß–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–µ–∑ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤
3. ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞
4. ‚úÖ –õ–µ–≥—á–µ –Ω–∞–≤–∏–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ –ø—Ä–æ–µ–∫—Ç—É

